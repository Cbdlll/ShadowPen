{% extends 'base.html' %}

{% block content %}
<div class="hero">
    <h1>Tech News Portal</h1>
    <p>The latest in technology, AI, and hardware.</p>
</div>

<!-- Vulnerability 10: Tag Filtering (Reflected) -->
{% if tag %}
<h3>Showing results for tag: {{ tag | safe }}</h3>
{% endif %}

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
    {% for article in articles %}
    <div class="card">
        <div class="card-image">
            <img src="{{ article.image_url }}" alt="{{ article.title }}">
        </div>
        <div class="card-content">
            <span class="tag">{{ article.category }}</span>
            <h2 class="title"><a href="{{ url_for('article', article_id=article.id) }}">{{ article.title }}</a></h2>
            <p class="subtitle">By {{ article.author }}</p>
            <p>{{ article.content[:100] }}...</p>
            <a href="{{ url_for('article', article_id=article.id) }}" class="btn" style="margin-top: 1rem;">Read
                More</a>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Vulnerability 7: JS Context Injection -->
<script>
    // Tracking current category for analytics
    var currentCategory = "{{ category | safe }}";
    console.log("Viewing category: " + currentCategory);
</script>
{% endblock %}